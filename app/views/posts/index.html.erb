<div class="new-post-path">
  <%= image_tag("new-post.png", :alt => "plus", :size => "30x30") %>
  <%= link_to new_post_path do %>
    New post
  <% end %>
</div>

<% @posts.each do |post| %>
  <div class="post">
    <%= simple_format(post.message) %>
    <%= post.created_at.strftime('%H:%M, %-d %B') %>
    <p id="number_of_likes"><%= post.likes.length %></p>

    <div id="like-form">
      <% if post.likes.find { |like| like.user_id === current_user.id } %>
        <% like = post.likes.find { |like| like.user_id === current_user.id } %>
        <%= button_to '', post_like_path(post, like), method: :delete, :class => "unlike-button" %>
      <% else %>
        <%= button_to '', post_likes_path(post), method: :post, :class => "like-button" %>
      <% end %>
    </div>

    <% if (post.user_id == current_user.id)  && post.less_than_ten_mins_ago %>
      <%= link_to edit_post_path(post.id) do %>
        Update
      <% end %>
    <% end %>
    <% if post.user_id == current_user.id %>
      <%= button_to 'Delete', post_path(post),
          method: :delete,
          data: { confirm: 'Are you sure?' } %>
    <% end %>
    <%= render "comments/index", :post => post %>
    <%= render "comments/new", :post => post %>
  </div>
<% end %>